> 💡**한 줄 요약**
>
> 이벤트 루프를 통해 자바스크립트가 싱글 스레도 기반 언어임에도 비동기 작업을 처리할 수 있다.
> 
> 이벤트 루프가 콜 스택과 태스크 큐를 관리하며 비동기 작업이 완료되면 그 결과를 처리할 수 있게 도와준다.
> 
> 비동기 작업이 호출될 경우 이는 콜 스택에서 처리되지 않고 웹 API에서 처리 후 만료되면 태스크 큐로 이동해 콜 스택이 비어있을 경우 이벤트 루프가 확인해 비동기 작업을 태스크 큐에서 콜 스택으로 이동해 실행한다.

### 1. 🤔 왜 사용하는가
- **자바스크립트의 비동기 작업**
    - 자바스크립트가 싱글 스레드 기반 언어임에도 비동기 작업을 처리할 수 있게 해주는 중요한 메커니즘
    - 자바스크립트는 기본적으로 하 번에 하나의 작업만 처리 가능하지만 이벤트 루프가 콜 스택과 이벤트 큐를 관리하며 비동기 작업이 완료되면 그 결과는 처리할 수 있게 도와준다

### 2. 💡 무엇인지 아는가(특징)
- **비동기 작업의 흐름**
  ![코드.png](/ComputerScience/assets/image3.png)
- **콜 스택**
    - 현재 실행 중인 코드들이 쌓이는 곳
    - 호출된 함수가 동기적으로 실행되는 메모리 공간
    - 한 번에 하나의 작업만 처리
    - 자바스크립트는 코드 실행할 때 스택을 사용해 순서대로 처리
- **이벤트 큐**
    - 선입선출 방식
    - 비동기 작업이 완료되면 그 결과를 대기시키는 곳
    - 비동기 작업이 완료된 후 실행을 기다리는 콜백 함수가 저장되는 메모리 공간
    - 콜 스택이 비어있을 때 이벤트 큐에 있는 콜백 함수가 콜 스택으로 이동 후 실행
    - **종류**
        1. **매크로태스크 큐**
            - 일반적인 비동기 작업들(`setTimeout` , `setInterval`)이 대기하는 큐
            - 이벤트 루프가 콜 스택과 마이크로태스크 큐의 작업을 모두 처리한 후, 하나씩만 처리함
        - **마이크로태스크 큐**
            - 중요도가 높은 작업들(`Promise.then()`)이 대기하는 큐
            - 매크로태스큐 큐보다 우선순위 높음
            - 이벤트 루프는 콜 스택이 비어있는 시점에 매크로 태스크를 실행하기 이전에 마이크로태스크 큐에 있는 모든 작업들을 먼저 처리
- **이벤트 루프**
    - 콜백 큐에 있는 함수를 콜 스택으로 이동시킴
- **Web APIs**
    - 웹 브라우저에 의해 처리되는 비동기 작업 도구 모여 있음
    - 콜백 함수를 비동기적으로 처리, 처리 끝나면 콜백 함수를 이벤트 큐로 전달
    - 멀티 스레드 환경으로 백그라운드에서 콜백 함수를 비동기적으로 처리 가능

- **이벤트 루프의 동작 `setTimeout(callback, 0)`**
    1. `setTimeout(callback, 0)` 호출
    2. 콜백 함수는 **웹 API**의해 타이머 설정
    3. 타이머 만료 후 콜백 함수는 **이벤트 큐에 추가**
    4. 콜 스택이 비어있을 때, 이벤트 루프가 이벤트 큐에서 대기 중인 콜백 꺼내 실행
    
    ⇒ 비동기 작업 호출해도 현재 실행 중인 모든 동기 작업들이 완료 후에 콜백 실행, `setTimeout(callback, 0)` 사용 시 코드의 실행을 다음 리벤트 루프 사이클로 미뤄짐
    

### 3. ✅ 장점

- 자바스크립트는 UI 업데이트나 사용자 입력 처리 수행하면서, 비동기 작업을 블로킹 없이 병렬적으로 처리 가능
