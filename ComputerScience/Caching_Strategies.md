> 💡 **한 줄 요약**
>
> 캐시는 성능 향상과 부하 감소를 위해 사용되는데, 캐시 불일치는 원본 데이터베이스에 저장된 데이터와 캐시에 저장된 데이터가 서로 다를 때 발생한다. 이와 같은 캐시 불일치 문제를 Write Through, Cache Invalidation, Write Behind 방식을 통해 해소할 수 있다.

### 1. 🤔 왜 사용하는가

- **캐시 사용 목적**

  - 성능 향상과 부하 감소

- **Cache Aside(Lazy Loading) 방식**
  - 캐시 히트 시 캐시에서 데이터를 불러옴
  - 캐시 미스 발생 시 원본 데이터베이스에서 조회해 반환
    - 애플리케이션은 캐시 미스 발생 시 해당 데이터를 캐시에 적재함
  - **장점**
    - 실제 요청된 데이터만 캐시에 저장됨
      → 불필요한 데이터 캐싱 줄임
    - 캐시에 문제 발생해도 애플리케이션은 원본 데이터베이스에 직접 접근 가능
      → 서비스가 계속 작동할 수 있음
  - **단점**
    - 캐시 미스가 발생하는 경우에만 데이터를 캐시에 적재
      → 원본 데이터베이스와 같은 데이터가 아닐 수 있음
    - 초기에 대량의 캐시 미스로 인한 데이터베이스 부하 발생 가능

### 2. 💡 무엇인지 아는가(특징)

> **캐시 불일치 해소를 위한 쓰기 전략**

- **캐시 불일치(Cache Inconsistency)**

  - 원본 데이터베이스에 저장된 데이터와 캐시에 저장된 데이터가 서로 다른 상황
  - 불일치 해소 방식 : Write Through, Cache Invalidation, Write Behind

- **Write Through 방식**

  - 원본 데이터에 대한 변경분이 생긴 경우,
    매번 캐시에 해당 데이터를 찾아 함께 변경
  - 캐시가 다시 조회되는 경우 적합
  - **장점**
    - 캐시는 항상 최신 데이터 가지고 있음
  - **단점**
    - 2번 쓰기 발생
    - 무작정 데이터를 갱신 및 저장하는 방식은 리소스 낭비 발생 가능
      → 만료 시간 사용 권장

- **Cache Invalidation 방식**

  - 원본 데이터에 대한 변경분이 생긴 경우, 캐시 데이터를 만료시키는 방식
  - Write Through의 방식의 단점 보완한 방식
  - 캐시에 데이터가 삭제됨
    - 캐시 불일치에 대한 걱정 없음

- **Write Behind(Write Back) 방식**
  - 원본 데이터에 대한 변경분이 생긴 경우,
    캐시를 먼저 업데이트한 이후 추후에 원본 데이터를 변경함
  - 디스크 쓰기 작업을 비동기 작업으로 수행해 성능 개선 가능
  - 원본 데이터와 캐시가 일시적으로 일치하지 않을 수 있었기에 쓰기 작업이 빈번해 일시적인 캐시 불일치를 허용하는 서비스에서 유용
