> 💡 **한 줄 요약**
>
> 트리 쉐이킹은 최종 번들 크기를 줄이기 위해 사용되지 않는 코드를 제거하는 최적화 방법이다.

### 1. 🤔 왜 사용하는가

- **트리 쉐이킹**
  - 최종 번들 크기를 줄이기 위해 사용되지 않는 코드를 제거하는 최적화 방법
  - 주로 모듈 시스템을 기반으로 동작
  - 사용되지 않는 데드(dead) 코드 감지해 번들에서 제거해 최적화함

### 2. 💡 무엇인지 아는가(특징)

- **트리 쉐이킹 작동 요건**

  1. **ES 모듈 사용**
  2. **순수 함수 형태로 작성**
     - 사이드 이펙트 없음
     - 모듈 내부에서 실행되는 코드가 전역 상태를 변경하거나 예측할 수 없는 동작을 할 경우
       - 번들러는 해당 코드가 제거되어도 안전한지 확신할 수 없음
       - 트리 쉐이킹이 적용되지 않을 수 있음
       - 해결 : `package.json` 에 `"sideEffects": false`설정
         - 해당 패키지가 사이드 이펙트가 없음을 명시
         - 적극적으로 최적화 가능

- **모듈**
  - ES 모듈
    - 정적인 구조 가짐
    - 코드 분석 과정에서 어떤 모듈이 사용되고, 어떤 모듈이 사용되지 않는지 쉽게 판단 가능
  - **CommonJS**
    - 동적 모듈 시스템
    - 정확한 코드 분석 어려워 트리 쉐이킹이 제대로 작동하지 않을 수 있음

### 3. 💪 적용

> **트리 쉐이킹의 적용**

- webpack, Rollup, esbuild 등의 번들러에서 트리 쉐이킹 기능 지원
- 설정 방법은 번들러마다 조금씩 차이 있음
- ex. webpack
  - `mode: 'production'` 설정을 통해 기본적인 트리 쉐이킹 활성화
  - `TerserPlugin` 같은 플러그인 추가 시 더욱 강력한 최적화 가능

> **트리 쉐이킹 효과 측정**

- 번들 크기 비교
  - 번들링된 결과물을 분석하는 webpack의 `bundle analyzer`같은 도구
    → 번들 이후 코드의 양을 시각적으로 확인 가능
- 번들 파일을 직접 확인해 원래 코드와 비교
