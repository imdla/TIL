> 💡 **한 줄 요약**
>
> Graceful shutdown은 애플리케이션이 종료될 때 바로 종료하는 것이 아니라, 현재 처리하고 있는 작업을 마무리하고 리소스를 정리한 이후 정리하는 방식이다.

### 1. 🤔 왜 사용하는가

- **우아한 종료(Graceful Shutdown)**
  - 애플리케이션이 종료될 때 바로 종료하는 것이 아니라, 현재 처리하고 있는 작업을 마무리하고 리소스를 정리한 이후 정리하는 방식
  - 서버 애플리케이션에서 일반적인 Grace Shutdown
    - SIGTERM 신호 받았을 때, 새로운 요청은 차단
      - 기존 처리 중인 요청을 모두 완료한 후 프로세스 종료
    - 만약, 서버 애플리케이션이 요청을 처리하는 중 즉각적으로 애플리케이션 종료할 경우
      - 트랜잭션 비정상 종료, 데이터 손실, 사용자 경험 저하 발생 가능

### 2. 💡 무엇인지 아는가(특징)

- **SIGTERM과 SIGKILL의 공통점**
  - 유닉스 및 리눅스 운영체제에서 사용되는 프로세스 종료 시그널
- **SIGTERM과 SIGKILL의 차이점**
  - **SIGKILL**
    - 프로세스를 강제 종료하는 신호
    - 프로세스가 종료하기 이전에 수행되어야 하는 절차들을 실행하지 않고 즉시 종료
  - **SIGTERM**
    - 프로세스가 해당 시그널을 핸들링 할 수 있음
    - 프로세스 종료하기 이전에 수행되어야 하는 절차들을 안전하게 수행 가능

> **스프링 환경에서 Graceful Shutdown 방법**

```java
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=20s // 타임아웃
```

- 스프링에서 Graceful Shutdown 설정을 지원해줌
- 기존 처리 중인 요청에서 데드락이나 무한 루프 발생 시 프로세스가 종료되지 않을 수 있음
  → 이 상황 예방위해 타임아웃을 설정
