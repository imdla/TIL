> ğŸ’¡ **í•œ ì¤„ ìš”ì•½**
>
> CORSëŠ” ì¶œì²˜ê°€ ë‹¤ë¥¸ ê³³ì˜ ë¦¬ì†ŒìŠ¤ ìš”ì²­ ì‹œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. CSRFë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ SOPê°€ ìˆì§€ë§Œ, í˜„ëŒ€ì—ëŠ” ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ì•„ CORSë¥¼ í†µí•´ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### 1. ğŸ¤” ì™œ ì‚¬ìš©í•˜ëŠ”ê°€

- **CORS (Cross Origin Resource Sharing)**

  - ì¶œì²˜ê°€ ë‹¤ë¥¸ ê³³ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜

- **ë¦¬ì†ŒìŠ¤ë¥¼ ì£¼ê³  ë°›ëŠ” ë‘ ê³³ì˜ ì¶œì²˜ê°€ ë‹¤ë¥¼ ê²½ìš° â‡’ ì¶œì²˜ê°€ êµì°¨í•¨**
  - ì¶œì²˜ëŠ” URLë¿ë§Œ ì•„ë‹ˆë¼ í”„ë¡œí† ì½œê³¼ í¬íŠ¸ê¹Œì§€ í¬í•¨
  - í´ë¼ì´ì–¸íŠ¸ì˜ ì¶œì²˜ê°€ ë¯¸í—ˆìš©ì¼ ê²½ìš°, CORS ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥

### 2. ğŸ’¡ ë¬´ì—‡ì¸ì§€ ì•„ëŠ”ê°€(íŠ¹ì§•)

> **CORS í•„ìš”ì„±**

- ê³¼ê±°, í¬ë¡œìŠ¤ ì‚¬ì´íŠ¸ ìš”ì²­ ìœ„ì¡°(CSRF, Cross-Site Request Forgery) ë¬¸ì œ
  - CSRF : í”¼í•´ì ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ë¥¸ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ê°€ì§œ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì „ì†¡í•˜ëŠ” ê³µê²©
- CSRF ì˜ˆë°© ìœ„í•´ ë¸Œë¼ìš°ì €ëŠ” ë™ì¼ ì¶œì²˜ ì •ì±…(SOP, Same-Origin Policy) êµ¬í˜„
  - SOPê°€ êµ¬í˜„ëœ ë¸Œë¼ìš°ì €ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë™ì¼í•œ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¡œë§Œ ìš”ì²­ ë³´ë‚¼ ìˆ˜ ìˆìŒ
  - SOPì˜ í•œê³„
    - í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë§ìŒ
    â‡’ SOP í™•ì¥í•œ CORS í•„ìš”

> **CORS ì‘ë™ ë°©ë²•**

1. **Simple Request ë³´ë‚´ëŠ” ê²½ìš°**

   ![image.png](/ComputerScience/assets/CORS_1.png)

   â†’ ë¸Œë¼ìš°ì € ìš”ì²­ ë©”ì‹œì§€ì— Origin í—¤ë”ì™€ ì‘ë‹µ ë©”ì‹œì§€ì˜ Access-Control-Allow-Origin í—¤ë”ë¥¼ ë¹„êµ

   - CORS ìœ„ë°˜í•˜ì§€ëŠ”ì§€ í™•ì¸
   - Originì—ëŠ” í˜„ì¬ ìš”ì²­í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì¶œì²˜(í”„ë¡œí† ì½œ, ë„ë©”ì¸, í¬íŠ¸)
   - Access-Control-Allow-Originì—ëŠ” ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ” ì¶œì²˜ ì‘ì„±

- **Simple Request(ë‹¨ìˆœ ìš”ì²­)ì¸ ê²½ìš°**
  - ìš”ì²­ ë©”ì„œë“œ (GET, POST, HEAD)
  - ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•œ ìš”ì²­ í—¤ë” (Accept. Accept-Language, Content-Language, Content-Type, Range)
  - Content-Type í—¤ë” (application/x-www-form-urlencoded, multipart/form-data, text/plain)

1. ë¸Œë¼ìš°ì €ê°€ **ì‚¬ì „ ìš”ì²­(Preflight Request)**ì„ ë³´ë‚´ëŠ” ê²½ìš°

   ![image.png](/ComputerScience/assets/CORS_2.png)

   - ë¸Œë¼ìš°ì €ê°€ ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì´ì „, Preflight Requestë¥¼ OPTIONS ë©”ì„œë“œë¡œ ìš”ì²­ì„ ë³´ë‚´ ì‹¤ì œ ìš”ì²­ì´ ì•ˆì „í•œì§€ í™•ì¸
   - Preflight Request ìš”ì²­ ì‹œ ì „ë‹¬í•´ì•¼ í•  ê²ƒ
     - Access-Control-Request-Methodë¡œ ì‹¤ ìš”ì²­ ë©”ì„œë“œ
     - Access-Control-Request-Headers í—¤ë”ì— ì‹¤ ìš”ì²­ì˜ ì¶”ê°€ í—¤ë” ëª©ë¡
   - ì´ì— ëŒ€í•œ ì‘ë‹µ
     - ëŒ€ì‘ë˜ëŠ” Access-Control-Allow-Methodsì™€ Access-Control-Headers
     - Preflight Requestë¡œ ì¸í•œ ì¶”ê°€ ìš”ì²­ ì¤„ì´ê¸° ìœ„í•´ ìºì‹œ ê¸°ê°„ì„ Access-Control-Max-Age ë‹´ì•„ ë³´ëƒ„

1. **ì¸ì¦ëœ ìš”ì²­(Crefential Request)ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹**

   ![image.png](/ComputerScience/assets/CORS_3.png)

   - ì¿ í‚¤ë‚˜ í† í°ê³¼ ê°™ì€ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•œ ìš”ì²­ì¼ ê²½ìš° ìˆ˜í–‰
   - ì„œë²„ì—ì„œ Access-Control-Allow-Credentialsë¥¼ trueë¡œ ì„¤ì •
   - Access-Control-Allow-Originì— ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš©í•˜ì§€ ëª»í•¨
