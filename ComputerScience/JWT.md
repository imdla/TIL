> 💡 **한 줄 요약**
>
> JWT는 토큰 자체에 정보가 포함되어 있는 클레임 기반 토큰으로, 통신 정보를 JSON 형식을 사용해 안전하게 전송하기 위해 사용된다.

### 1. 🤔 왜 사용하는가

- **JWT (Json Web Token)**
  - 통신 정보를 JSON 형식을 사용하여 안전하게 전송하기 위해 사용
  - 토큰 자체에 정보가 포함되어 있는 클레임 기반 토큰
  - 애플리케이션에서 주로 인증/인가를 구현하기위해 사용
  - 구분
    - **헤더** : 토큰의 암호화 알고리즘이나 타입
    - **페이로드** : 데이터(만료일, 사용자 정보 등)
    - **시그니처** : 헤더와 페이로드가 변조되지 않았는지 판단하기 위해 사용
  - 헤더와 페이로드를 비밀 키를 사용해 헤더에 명시된 암호화 알고리즘으로 암호화하여 시그니처가 만들어짐

### 2. 💡 무엇인지 아는가(특징)

- **JWT 사용한 인가 구현**
  - 클레임 기반 토큰의 특성으로 세션 기반 인증에 비해 사용자 정보를 조회하기 위한 추가적인 작업이 필요하지 않음
  - 서버가 상태를 관리하지 않아 서버가 이중화된 환경에서도 사용자의 로그인 정보를 일관성 있게 관리
    - 세션 불일치 문제가 발생하지 않음

### 3. ⚠️ 주의사항

- **JWT 사용 시 주의 사항**
  1. **JWT는 디코딩이 쉬움**
     - Base64로 디코딩할 경우 페이로드 확인 가능
     - 민감한 정보를 담는 것에 유의해야 함
  2. **시크릿 키의 복잡도가 낮은 경우, 무작위 대입 공격(Brute force Attack) 노출 될 수 있음**
     - 강력한 시크릿 키를 사용하는 것이 권장됨
  3. **시크릿 키는 유출되면 안되어 안전한 공간에 관리해야 함**
  4. **JWT 탈취에 유의**
     - JWT 저장 공간, 리프레시 토큰 도입 여부, Refresh Token Rotation, 탈취 감지 및 대응에 대해 고민 필요
  5. **토큰의 잦은 갱신이 사용자 경험을 저해하는지 고려**
     - 슬라이딩 세션과 같은 전략 고민 필요
  6. **JWT none 알고리즘 공격 유의**
     - 공격자가 토큰의 헤더에 명시된 알고리즘을 none으로 변경해 페이로드가 변조되어도 시그니처 검증을 우회할 수 있음
     - none 알고리즘 공격을 예방한 라이브러리 사용
     - none 알고리즘과 같이 약할 알고리즘에 대해서 필터링 필요

### 4. ✅ 장점

1. **Stateless 인증 방식 제공**
   - 서버가 사용자의 인증 상태를 별도로 저장할 필요 없음
     → 서버의 메모리나 데이터베이스 비용 줄일 수 있음
   - 인증 상태 관리에 대한 부담 없음
     → 서버의 확장성 측면 유리
2. **토큰에 자체적으로 필요한 정보 포함 가능**
   - 사용자 ID, 권한 정보 등을 토큰 자체에 담을 수 있음
     → 추가적인 데이터베이스 조회 없이도 필요한 인증 관련 정보 얻을 수 있음
3. **서명(Signature)을 포함하고 있어 데이터의 무결성 보장 가능**
   - 서버에서 발급한 JWT가 변경되었는지 검증 가능
     → 클라이언트가 임의로 내용을 조작하는 것을 방지 가능

### 5. ❎ 단점

1. **로그아웃을 강제할 수 없음**
   - 액세스 토큰의 상태는 서버에서 별도로 관리하지 않음
     → 한 번 발급된 토큰은 만료될 때까지 유효함
     → 서버에서 임의의 토큰을 무효화할 수 없음
     다중 로그인 제한과 같은 기능 구현 어려움
2. **페이로드 크기로 인한 네트워크 부하 발생 가능**
   - JWT는 사용자 정보를 포함해 일반적인 세션 ID보다 용량이 큼
     → 네트워크 비용 증가 가능
