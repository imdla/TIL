> 💡 **한 줄 요약**
> 
> 커넥션 풀이 없다면 애플리케이션에서 데이터베이스에 접근해야하는 요청을 처리할 때마다 커넥션으 새로 생성, 연결 및 해제 과정을 반복해야 한다. 이 과정은 상당히 많은 비용이 들어 요청의 응답 시간이 길어진다. 또한, 동시에 많은 요청에 들어올 경우 매번 새로운 커넥션을 생성해 데이터베이스의 최대 연결 수를 초과해 요청 거부 및 데이터베이스가 비정상 종료될 수 있다.



### 1. 🤔 왜 사용하는가

- 애플리케이션과 데이터베이스 통신위해 데이터베이스 커넥션 필요
- **데이터베이스 커넥션의 생애주기**
    1. 데이터베이스 드라이버를 사용해 데이터베이스 연결
    2. 데이터 읽기/쓰기를 위한 TCP 소켓 열기
    3. 소켓을 통한 데이터 읽기/쓰기
    4. 연결 종료
    5. 소켓 닫기

- **커넥션 풀(Connection Pool)**
    - 애플리케이션과 데이터베이스 간의 데이터베이스 연결(Connection)을 미리 생성해두고, 이를 재사용하는 기법
    - **주요 구성 요소**
        - 초기 풀 크기 (Initial Pool Size)
        - 최소 풀 크기 (Minimum Pool Size)
        - 최대 풀 크기 (Maximum Pool Size)
        - 연결 대기 시간 (Connection Timeout)

### 2. 💡 무엇인지 아는가(특징)

- **커넥션 풀이 없을 경우**
    1. 애플리케이션에서 데이터베이스에 접근해야하는 요청을 처리할 때 마다 커넥션을 새로 생성해 연결 및 해제 과정 반복 필요
        - 이 과정은 **상당한 비용**이 듦 → 요청의 응답 시간이 길어짐
    2. 동시에 많은 요청이 들어올 경우 매번 새로운 커넥션 생성함
        - 데이터베이스의 **최대 연결 수 초과**할 수 있음
        - 데이터베이스는 동시에 처리할 수 있는 요청 개수에 제한 있음
            - 제한 초과 시 요청 거부 및 데이터베이스가 비정상 종료될 수 있음

### 3. ✅ 장점

- **데이터베이스 커넥션 풀의 사용 장점**
    1. 데이터베이스에 접근할 때 마다 새로운 연결을 생성 및 종료하지 않고
    **미리 준비된 연결을 재사용**함
        - 성능 향상 및 자원 사용 최적화 가능
    2. **커넥션 풀의 주요 구성 요소를 통해 커넥션을 효율적 관리 가능**

### 4. ⚠️ 단점

- **커넥션 풀 사이즈는 클수록 좋을까 ?**
    - **커넥션을 사용하는 주체 → 스레드(Thread)**
        - 커넥션과 스레드를 연결지어 생각해야 함
    - **커넥션 풀 사이즈 > 스레드 풀 사이즈**
        - 스레드가 모두 사용하지 못해 리소스 낭비됨
    - **커넥션 풀 사이즈 < 스레드 풀 사이즈**
        - 스레드가 커넥션이 반환되기를 기다려 작업이 지연됨
    - **커넥션 풀 사이즈와 스레드 풀 사이즈의 균형**
        - 균형이 맞더라도 너무 큰 사이즈로 설정 시, 데이터베이스 서버, 애플리케이션 서버의 메모리와 CPU의 과도한 사용으로 성능 저하됨