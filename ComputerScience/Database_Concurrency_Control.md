> 💡 **한 줄 요약**
>
> 데이터베이스 시스템에서 동시성 제어 방법은 대표적으로 MVCC와 Lock-Based가 있다.
>
> MVCC는 데이터의 여러 버전을 유지해 트랜잭션이 동시에 데이터를 읽고 쓸 수 있도록 하는데, 이때 트랜잭션은 자신만의 일관된 스냅샷을 기반으로 데이터를 읽는다. 이는 읽기 작업 시 잠금을 사용하지 않아 잠금을 최소화하고 높은 동시성을 제공한다.
>
> Lock-Based는 데이터 접근 시 잠금을 사용해 동시성을 제어하는데, 읽기 작업은 공유 잠금, 쓰기 작업은 배타 잠금을 사용한다. 쓰기 트랜잭션에서 사용시 데이터의 일관성과 무결성을 유지하며 데이터 충돌을 방지할 수 있다.

### 1. 🤔 왜 사용하는가

- **데이터베이스 시스템의 동시성 제어 방법**
  - MVCC(Multi-Version Concurrency Control)
  - Lock-Based Concurrency Control

### 2. 💡 무엇인지 아는가(특징)

- **MVCC(Multi-Version Concurrency Control)**

  1. **일관된 스냅샷**
     - 데이터의 여러 버전을 유지해 트랜잭션이 동시에 데이터를 읽고 쓸 수 있도록 하는 방식
     - 각 트랜잭션은 자신만의 일관된 스냅샷 기반으로 데이터 읽어, 다른 트랜잭션의 변경 사항에 영향 받지 않음
     - 데이터의 각 버전 유지해 읽기 작업이 쓰기 작업과 독립적으로 실행 가능
     - 트랜잭션은 시작 시점의 스냅샷을 기반으로 데이터를 읽어, 다른 트랜잭션의 변경 사항을 보지 못함
  2. **읽기 작업의 잠금 미사용으로 높은 동시성 제공**
     - 읽기 작업이 잠금에 의해 지연되지 않아, 읽기 중심의 애플리케이션에서 우수한 성능
     - 읽기 작업에서 잠금을 사용하지 않아 쓰기 작업과의 충돌 줄어듦
     - 이는 여러 버전의 데이터를 유지해야해 저장 공간이 많이 필요

  - 트랜잭션이 시작된 시점의 데이터 상태를 기반으로 읽기 작업을 수행해 일관성을 유지
  - 갭락과 넥스트키 락을 통해 팬텀 리드 방지

- **Lock-Based Concurrency Control**
  1. **데이터 접근 시 잠금**
     - 데이터 접근 시 잠금을 사용해 동시성 제어함
     - 트랜잭션이 데이터를 읽거나 수정 시, 데이터에 잠금을 걸어 다른 트랜잭션의 접근을 제한
     - 잠금을 통해 데이터의 일관성과 무결성을 직접적으로 제어
  2. **읽기 작업은 공유 잠금, 쓰기 작업은 배타 잠금**
     - 다수의 트랜잭션이 동일한 데이터에 접근할 경우 성능 저하 발생 가능
     - 잘못된 잠금 순서나 설계로 인해 교착 상태(Deadlock) 발생 가능

> **사용**

- MySQL의 InnoDB는 MVCC와 Lock-Based 방식의 장점을 결합해 동시성 제어를 최적화함
- **읽기 트랜잭션**
  - MVCC 사용해 일관된 스냅샷 기반으로 데이터 읽음
    → 잠금 최소화, 높은 동시성 유지 가능
- **쓰기 트랜잭션**
  - Lock-Based 사용해 데이터의 일관성과 무결성 유지
    → 데이터 충돌 방지
