## <mark color="#fbc956">Spring에서의 영속성</mark>

### 1. 영속성 (Persistence)

- 데이터를 생성한 프로그램이 종료되어도 사라지지 않는 데이터의 특성

- **영속성 데이터**

  - 하드디스크에 파일로 저장된 데이터
  - 데이터베이스에 저장된 데이터
  - 프로그램이 종료되어도 유지됨

- **비영속성 데이터**
  - 프로그램의 메모리(RAM)에만 존재하는 데이터
  - Java의 경우 객체가 메모리에만 있는 상태
  - 프로그램이 종료되면 모두 사라짐

### 2. JDBC

- Java Database Connectivity
- 자바에서 데이터베이스에 접속할 수 있도록 하는 자바 API
- 모든 자바의 데이터베이스 연동 기술의 근간

- **장점**

  - 표준 인터페이스 제공
  - 데이터베이스 벤더에 관계없이 동일한 코드 사용 가능
  - 낮은 수준의 데이터베이스 작업에 대한 직접적인 제어 가능

- **단점**
  - 반복적인 코드가 많음 (Connection, PrepareStatement, ResultSet 등)
  - SQL문을 직접 문자열로 작성해야 함
    - 예외 처리가 복잡하

### 3. MyBatis

- SQL Mapper 프레임워크
- XML 또는 어노테이션으로 SQL을 별도로 관리할 수 있음

- **장점**

  - SQL을 별도의 파일로 분리해 관리 가능
  - 동적 SQL을 작성하기 쉬움
  - 복잡합 JDBC 코드가 없음
  - 결과를 자바 객체로 자동 매핑해줌

- **단점**
  - SQL을 직접 작성해야 함
  - 데이터베이스 벤더에 종속적인 SQL을 작성해야 할 수 있음
  - JPA에 비해 객체지향적이지 않음

---

### 4. ORM

- Object-Relational Mapping
- 객체와 관계형 데이터베이스를 매핑하는 기술
- 객체지향 프로그래밍과 관계형 데이터베이스 간의 패러다임 불일치를 해결
- 대표적으로 JPA, Hibernate가 있음

### 5. JPA

- Java Persistence API
- 자바 진영의 ORM 표준 명세
- 실제 구현체가 아닌 인터페이스의 모음
- 대표적인 구현체 : Hiberbate

- **장점**

  - 객체지향적인 코드 작성 가능
  - 데이터베이스에 독립적인 개발 가능
  - SQL을 직접 작성하지 않아도 됨
  - 1차 캐시, 지연 로딩 등의 성능 최적화 기능을 제공

- **단점**
  - 복잡한 쿼리는 직접 작성해야 할 수 있음

### 6. Hibernate

- JPA의 대표적이고 널리 사용되는 구현체

- **특징**
  - JPA 표준 기능 외 추가 기능 제공
    - 더 다양한 매핑 어노테이션
    - 고급 캐싱 전략
    - 네이티브 SQL 지원

---

### 7. Spring Data JPA

- JPA를 더 편리하게 사용할 수 있도록 스프링에서 제공하는 프로젝트
- Repository 인터페이스를 통한 추상화된 데이터 접근 계층을 제공
- JPA Provider(Hibernate 등)를 한 번 더 추상화한 것

- **장점**

  - 인터페이스만으로 구현체 만들어줌
  - 메소드 이름만으로 쿼리 생성 가능
  - 페이지, 정렬 등 데이터 접근 코드를 자동으로 제공
  - 반복적인 CRUD 작업을 위한 공통 인터페이스 제공
  - 명시적인 설정 없이도 JPA를 스프인과 통합해서 사용 가능

- **단점**
  - JPA와 마찬가지로 복잡한 쿼리 처리가 어려울 수 있음
  - 메소드 이름이 길어질 수 있음 (findByLastnameAndFirstName 등)
  - JPA/Hibernate를 이해하지 못하면 문제 해결이 어려울 수 있음
